<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sensitivity &mdash; mads-sa-ca-docs 0.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/custom_styles.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=e031e9a9"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="mads_sensitivity" href="mads_sensitivity.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            mads-sa-ca-docs
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="mads_sensitivity.html">mads_sensitivity</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Sensitivity</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Sensitivity.SensitivityDriver"><code class="docutils literal notranslate"><span class="pre">SensitivityDriver</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Sensitivity.SensitivityDriver.clean"><code class="docutils literal notranslate"><span class="pre">SensitivityDriver.clean()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#Sensitivity.SensitivityDriver.core_setup"><code class="docutils literal notranslate"><span class="pre">SensitivityDriver.core_setup()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#Sensitivity.SensitivityDriver.design_experiment"><code class="docutils literal notranslate"><span class="pre">SensitivityDriver.design_experiment()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#Sensitivity.SensitivityDriver.extract_data_for_sensitivity_analysis"><code class="docutils literal notranslate"><span class="pre">SensitivityDriver.extract_data_for_sensitivity_analysis()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#Sensitivity.SensitivityDriver.generate_lhc"><code class="docutils literal notranslate"><span class="pre">SensitivityDriver.generate_lhc()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#Sensitivity.SensitivityDriver.generate_uniform"><code class="docutils literal notranslate"><span class="pre">SensitivityDriver.generate_uniform()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#Sensitivity.SensitivityDriver.get_cmtnum"><code class="docutils literal notranslate"><span class="pre">SensitivityDriver.get_cmtnum()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#Sensitivity.SensitivityDriver.get_initial_params_dir"><code class="docutils literal notranslate"><span class="pre">SensitivityDriver.get_initial_params_dir()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#Sensitivity.SensitivityDriver.get_sensitivity_csvs"><code class="docutils literal notranslate"><span class="pre">SensitivityDriver.get_sensitivity_csvs()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#Sensitivity.SensitivityDriver.info"><code class="docutils literal notranslate"><span class="pre">SensitivityDriver.info()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#Sensitivity.SensitivityDriver.load_experiment"><code class="docutils literal notranslate"><span class="pre">SensitivityDriver.load_experiment()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#Sensitivity.SensitivityDriver.run_all_samples"><code class="docutils literal notranslate"><span class="pre">SensitivityDriver.run_all_samples()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#Sensitivity.SensitivityDriver.run_model"><code class="docutils literal notranslate"><span class="pre">SensitivityDriver.run_model()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#Sensitivity.SensitivityDriver.save_experiment"><code class="docutils literal notranslate"><span class="pre">SensitivityDriver.save_experiment()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#Sensitivity.SensitivityDriver.setup_multi"><code class="docutils literal notranslate"><span class="pre">SensitivityDriver.setup_multi()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#Sensitivity.log_wrapper"><code class="docutils literal notranslate"><span class="pre">log_wrapper()</span></code></a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">mads-sa-ca-docs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Sensitivity</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/sensitivity.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-Sensitivity">
<span id="sensitivity"></span><h1>Sensitivity<a class="headerlink" href="#module-Sensitivity" title="Permalink to this heading"></a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="Sensitivity.SensitivityDriver">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">Sensitivity.</span></span><span class="sig-name descname"><span class="pre">SensitivityDriver</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sampling_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clean</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Sensitivity.SensitivityDriver" title="Permalink to this definition"></a></dt>
<dd><p>Sensitivity Analysis Driver class.</p>
<p>Driver class for conducting dvmdostem SensitivityAnalysis.
Methods for cleaning, setup, running model, collecting outputs.</p>
<dl class="simple">
<dt>Basic overview of use is like this:</dt><dd><ol class="arabic simple">
<li><p>Instantiate driver object.</p></li>
<li><p>Setup/design the experiment (parameters, to use, 
number of samples, etc)</p></li>
<li><p>Use driver object to setup the run folders.</p></li>
<li><p>Use driver object to carry out model runs.</p></li>
<li><p>Use driver object to summarize/collect outputs.</p></li>
<li><p>Use driver object to make plots, do analysis.</p></li>
</ol>
</dd>
</dl>
<section id="parameters">
<h2>Parameters<a class="headerlink" href="#parameters" title="Permalink to this heading"></a></h2>
</section>
<section id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Permalink to this heading"></a></h2>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this heading"></a></h2>
<p>Instantiate object, sets pixel, outputs, working directory, 
site selection (input data path)</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">driver</span> <span class="o">=</span> <span class="n">SensitivityDriver</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">driver</span><span class="o">.</span><span class="n">work_dir</span> <span class="o">=</span> <span class="s1">&#39;/tmp/tests-Sensitivity&#39;</span>
</pre></div>
</div>
<p>Setup the sensitivity analysis experiment:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">driver</span><span class="o">.</span><span class="n">clean</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># generate sample size N=5 and CMT=4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">driver</span><span class="o">.</span><span class="n">design_experiment</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;cmax&#39;</span><span class="p">,</span><span class="s1">&#39;rhq10&#39;</span><span class="p">,</span><span class="s1">&#39;nfall(1)&#39;</span><span class="p">],</span> <span class="n">pftnums</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">driver</span><span class="o">.</span><span class="n">sample_matrix</span>
<span class="go">        cmax     rhq10  nfall(1)</span>
<span class="go">0  63.536594  1.919504  0.000162</span>
<span class="go">1  62.528847  2.161819  0.000159</span>
<span class="go">2  67.606747  1.834203  0.000145</span>
<span class="go">3  59.671967  2.042034  0.000171</span>
<span class="go">4  57.711999  1.968631  0.000155</span>
</pre></div>
</div>
<p>Generate smaple matrix using uniform and lhc methods:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">driver</span><span class="o">.</span><span class="n">generate_uniform</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">driver</span><span class="o">.</span><span class="n">generate_lhc</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">driver</span><span class="o">.</span><span class="n">sample_matrix</span>
<span class="go">        cmax     rhq10  nfall(1)</span>
<span class="go">0  64.235204  2.068878  0.000171</span>
<span class="go">1  58.242357  2.001612  0.000144</span>
<span class="go">2  62.733933  1.830199  0.000161</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="Sensitivity.SensitivityDriver.clean">
<span class="sig-name descname"><span class="pre">clean</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Sensitivity.SensitivityDriver.clean" title="Permalink to this definition"></a></dt>
<dd><p>Remove the entire tree at <cite>self.work_dir</cite>.</p>
<p>This function is NOT CAREFUL, so be careful using it!</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Sensitivity.SensitivityDriver.core_setup">
<span class="sig-name descname"><span class="pre">core_setup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">row</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initial</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Sensitivity.SensitivityDriver.core_setup" title="Permalink to this definition"></a></dt>
<dd><p>Do all the work to setup and configure a model run.
Uses the <cite>row</cite> parameter (one row of the sample matrix) to
set the parameter values for the run.</p>
<p>Currently relies on command line API for various dvmdostem
helper scripts. Would be nice to transition to using a Python
API for all these helper scripts (modules).</p>
<section id="id1">
<h3>Parameters<a class="headerlink" href="#id1" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>row<span class="classifier">dict</span></dt><dd><p>One row of the sample matrix, in dict form. So like this: <code class="docutils literal notranslate"><span class="pre">{'cmax':</span> <span class="pre">108.2,</span> <span class="pre">'rhq10':</span> <span class="pre">34.24}</span></code>
with one key for each parameter name.</p>
</dd>
<dt>idx<span class="classifier">int</span></dt><dd><p>The row index of the <cite>sample_matrix</cite> being worked on. Gets
used to set the run specific folder name, i.e. <code class="docutils literal notranslate"><span class="pre">sample_000001</span></code>.</p>
</dd>
</dl>
</section>
<section id="returns">
<h3>Returns<a class="headerlink" href="#returns" title="Permalink to this heading"></a></h3>
<p>None</p>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Sensitivity.SensitivityDriver.design_experiment">
<span class="sig-name descname"><span class="pre">design_experiment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Nsamples</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmtnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pftnums</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">percent_diffs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bounds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sampling_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'lhc'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Sensitivity.SensitivityDriver.design_experiment" title="Permalink to this definition"></a></dt>
<dd><p>Builds bounds based on initial values found in dvmdostem parameter 
files (cmt_*.txt files) and the <cite>percent_diffs</cite> array. 
The <cite>percent_diffs</cite> array gets used to figure out how far
the bounds should be from the initial value. Defaults to initial 
value +/-10%.</p>
<p>Sets instance values for <cite>self.params</cite> and <cite>self.sample_matrix</cite>.</p>
<section id="id2">
<h3>Parameters<a class="headerlink" href="#id2" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>Nsamples<span class="classifier">int</span></dt><dd><p>How many samples to draw. One sample equates to one run to be done with 
the parameter values in the sample.</p>
</dd>
<dt>cmtnum<span class="classifier">int</span></dt><dd><p>Which community type number to use for initial parameter values, for
doing runs and analyzing outputs.</p>
</dd>
<dt>params<span class="classifier">list of strings</span></dt><dd><p>List of parameter names to use in the experiment. Each name must be
in one of the dvmdostem parameter files (cmt_*.txt).</p>
</dd>
<dt>pftnums<span class="classifier">list of ints</span></dt><dd><p>List of PFT numbers, one number for each parameter in <cite>params</cite>. Use
<cite>None</cite> in the list for any non-pft parameter (i.e. a soil parameter).</p>
</dd>
<dt>percent_diffs<span class="classifier">list of floats</span></dt><dd><p>List values, one for each parameter in <cite>params</cite>. The value is used to
the bounds with respect to the intial parameter value. I.e. passing
a value in the percent_diff array of .3 would mean that bounds should
be +/-30% of the initial value of the parameter.</p>
</dd>
<dt>sampling_method<span class="classifier">str</span></dt><dd><p>A string indicating which sampling method to use for getting values for
the sample matrix. Currently the options are ‘lhc’ or ‘uniform’.</p>
</dd>
</dl>
</section>
<section id="id3">
<h3>Returns<a class="headerlink" href="#id3" title="Permalink to this heading"></a></h3>
<p>None</p>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Sensitivity.SensitivityDriver.extract_data_for_sensitivity_analysis">
<span class="sig-name descname"><span class="pre">extract_data_for_sensitivity_analysis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">posthoc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Sensitivity.SensitivityDriver.extract_data_for_sensitivity_analysis" title="Permalink to this definition"></a></dt>
<dd><p>Creates a csv file in each run directory that summarizes
the run’s parameters and outut. The csv file will look 
something like this:</p>
<p>p_cmax,  p_rhq10,   p_micbnup,   o_GPP,  o_VEGC
1.215,   2.108,     0.432,       0.533,  5.112</p>
<p>with one columns for each parameter and one column for 
each output. The</p>
<p>For each row in the sensitivity matrix (and corresponding 
run folder), 
For each variable specified in self.outputs:
- opens the NetCDF files that were output from dvmdostem
- grabs the last datapoint
- writes it to the sensitivity.csv file</p>
<section id="id4">
<h3>Parameters<a class="headerlink" href="#id4" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>posthoc<span class="classifier">bool (Not implemented yet)</span></dt><dd><p>Flag for controlling whether this step should be run after the
model run or as part of the model run</p>
</dd>
<dt>multi<span class="classifier">bool (Not impolemented yet)</span></dt><dd><p>Flag for if the runs are done all in one directory or each in 
its own directory. If all runs are done in one directory
then paralleization is harder and this step of collating the
output data must be done at the end of the run before the next run
overwrites it.</p>
</dd>
</dl>
</section>
<section id="id5">
<h3>Returns<a class="headerlink" href="#id5" title="Permalink to this heading"></a></h3>
<p>None</p>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Sensitivity.SensitivityDriver.generate_lhc">
<span class="sig-name descname"><span class="pre">generate_lhc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">N</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Sensitivity.SensitivityDriver.generate_lhc" title="Permalink to this definition"></a></dt>
<dd><p>Generate sample matrix using Latin Hyper Cube method.</p>
<p>Sample matrix will have one row for each “sample” of the
parameters. There will be one column for each parameter in
the <cite>param_props</cite> list.</p>
<section id="id6">
<h3>Parameters<a class="headerlink" href="#id6" title="Permalink to this heading"></a></h3>
<dl>
<dt>N<span class="classifier">int</span></dt><dd><p>number of samples (rows) to create</p>
</dd>
<dt>seed<span class="classifier">int</span></dt><dd><p>a number that allows to reproduce a similar set of random numbers</p>
</dd>
<dt>params<span class="classifier">list of dicts</span></dt><dd><p>Each item in <cite>param_props</cite> list will be a dictionary
with at least the following:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>  <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;cmax&#39;</span><span class="p">,</span>               <span class="c1"># name in dvmdostem parameter file (cmt_*.txt)</span>
<span class="gp">... </span>  <span class="s1">&#39;bounds&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">100.1</span><span class="p">,</span> <span class="mf">105.1</span><span class="p">],</span>     <span class="c1"># the min and max values the parameter can have</span>
<span class="gp">... </span><span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="id7">
<h3>Returns<a class="headerlink" href="#id7" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>sample_matrix<span class="classifier">pandas.DataFrame, shape (N, len(params))</span></dt><dd><p>There will be one column for each parameter in the
<cite>param_props</cite> list and N rows (samples).</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Sensitivity.SensitivityDriver.generate_uniform">
<span class="sig-name descname"><span class="pre">generate_uniform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">N</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Sensitivity.SensitivityDriver.generate_uniform" title="Permalink to this definition"></a></dt>
<dd><p>Generate sample matrix using uniform method.</p>
<p>Sample matrix will have one row for each “sample” of the
parameters. There will be one column for each parameter in
the <cite>param_props</cite> list.</p>
<section id="id8">
<h3>Parameters<a class="headerlink" href="#id8" title="Permalink to this heading"></a></h3>
<dl>
<dt>N<span class="classifier">int</span></dt><dd><p>number of samples (rows) to create</p>
</dd>
<dt>seed<span class="classifier">int</span></dt><dd><p>a number that allows to reproduce a similar set of random numbers</p>
</dd>
<dt>params<span class="classifier">list of dicts</span></dt><dd><p>Each item in <cite>param_props</cite> list will be a dictionary
with at least the following:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>  <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;rhq10&#39;</span><span class="p">,</span>        <span class="c1"># name in dvmdostem parameter file (cmt_*.txt)</span>
<span class="gp">... </span>  <span class="s1">&#39;bounds&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">5.2</span><span class="p">,</span> <span class="mf">6.4</span><span class="p">],</span>   <span class="c1"># the min and max values the parameter can have</span>
<span class="gp">... </span><span class="p">}</span>
</pre></div>
</div>
</dd>
<dt>logparams<span class="classifier">list </span></dt><dd><p>for parameter values less than 0.01 use log distribution</p>
<p>1 : apply log distribution, 0 : keep as is.</p>
</dd>
</dl>
</section>
<section id="id9">
<h3>Returns<a class="headerlink" href="#id9" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>sample_matrix<span class="classifier">pandas.DataFrame, shape (N, len(params))</span></dt><dd><p>There will be one column for each parameter in the
<cite>param_props</cite> list and N rows (samples).</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Sensitivity.SensitivityDriver.get_cmtnum">
<span class="sig-name descname"><span class="pre">get_cmtnum</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Sensitivity.SensitivityDriver.get_cmtnum" title="Permalink to this definition"></a></dt>
<dd><p>Enforces that there is only one cmtnum specified
amongst all the param specifications in <cite>self.params</cite>.</p>
<section id="id10">
<h3>Returns<a class="headerlink" href="#id10" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>cmtnum<span class="classifier">int or None</span></dt><dd><p>The cmtnum specified, or None if cmt not set.</p>
</dd>
</dl>
</section>
<section id="raises">
<h3>Raises<a class="headerlink" href="#raises" title="Permalink to this heading"></a></h3>
<p>RuntimeError - if there in valid specification of
cmtnum in the params list.</p>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Sensitivity.SensitivityDriver.get_initial_params_dir">
<span class="sig-name descname"><span class="pre">get_initial_params_dir</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Sensitivity.SensitivityDriver.get_initial_params_dir" title="Permalink to this definition"></a></dt>
<dd><p>Read only accessor to private member variable.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Sensitivity.SensitivityDriver.get_sensitivity_csvs">
<span class="sig-name descname"><span class="pre">get_sensitivity_csvs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Sensitivity.SensitivityDriver.get_sensitivity_csvs" title="Permalink to this definition"></a></dt>
<dd><p>Looks for all the sensitivity.csv files that are present in
the run directories. The sensitivity.csv files are created
using the extract_data_for_sensitivity_analysis(..) funciton.</p>
<section id="id11">
<h3>Returns<a class="headerlink" href="#id11" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>file_list<span class="classifier">list of strings</span></dt><dd><p>list of paths to sensitivity.csv files, one for each file run folder</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Sensitivity.SensitivityDriver.info">
<span class="sig-name descname"><span class="pre">info</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Sensitivity.SensitivityDriver.info" title="Permalink to this definition"></a></dt>
<dd><p>Print some summary info about the SensitivityDriver object.</p>
<p>Not sure how to best handle the summary of outputs yet. Maybe
a separate method. The problem is that existing outputs may 
be leftover from prior runs and thus may not match the existing
params and sample_matrix data. But I don’t want to be too
aggressive in cleaning up old outputs incase they are expensive 
to re-create.</p>
<section id="id12">
<h3>Returns<a class="headerlink" href="#id12" title="Permalink to this heading"></a></h3>
<p>None</p>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Sensitivity.SensitivityDriver.load_experiment">
<span class="sig-name descname"><span class="pre">load_experiment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">param_props_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample_matrix_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">info_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Sensitivity.SensitivityDriver.load_experiment" title="Permalink to this definition"></a></dt>
<dd><p>Load parameter properties and sample matrix from files.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Sensitivity.SensitivityDriver.run_all_samples">
<span class="sig-name descname"><span class="pre">run_all_samples</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Sensitivity.SensitivityDriver.run_all_samples" title="Permalink to this definition"></a></dt>
<dd><p>Starts run in each Sample Specific Run Folder.</p>
<p>Wrapper around <cite>run_model(..)</cite> that allows for parallelization.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Sensitivity.SensitivityDriver.run_model">
<span class="sig-name descname"><span class="pre">run_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rundirectory</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Sensitivity.SensitivityDriver.run_model" title="Permalink to this definition"></a></dt>
<dd><p>Run the model.</p>
<p>Assumes everything is setup in a “Sample Specific Run Folder”.</p>
<section id="id13">
<h3>Returns<a class="headerlink" href="#id13" title="Permalink to this heading"></a></h3>
<p>None</p>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Sensitivity.SensitivityDriver.save_experiment">
<span class="sig-name descname"><span class="pre">save_experiment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Sensitivity.SensitivityDriver.save_experiment" title="Permalink to this definition"></a></dt>
<dd><p>Write the parameter properties and sensitivity matrix to files.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Sensitivity.SensitivityDriver.setup_multi">
<span class="sig-name descname"><span class="pre">setup_multi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">force</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Sensitivity.SensitivityDriver.setup_multi" title="Permalink to this definition"></a></dt>
<dd><p>Makes one run directory for each row in sample matrix.</p>
<p>This is essentially a wrapper around <cite>core_setup(..)</cite> 
that allows for parallelization.</p>
<section id="id14">
<h3>Returns<a class="headerlink" href="#id14" title="Permalink to this heading"></a></h3>
<p>None</p>
</section>
</dd></dl>

</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="Sensitivity.log_wrapper">
<span class="sig-prename descclassname"><span class="pre">Sensitivity.</span></span><span class="sig-name descname"><span class="pre">log_wrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Sensitivity.log_wrapper" title="Permalink to this definition"></a></dt>
<dd><p>Likely will abandon or repurpose this function.
Not super helpful as a log printer.</p>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="mads_sensitivity.html" class="btn btn-neutral float-left" title="mads_sensitivity" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Elchin Jafarov.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>